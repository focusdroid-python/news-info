# news-info
flask新闻项目

### flask生成数据库迁移表
```python
python manager.py db init
python manager.py db migrate -m 'initial'
python manager.py db upgrade
```








### 4. 短信验证码

 - 目的：完善短信接口的编写
 - 操作步骤
 - 1. 获取参数
   2. 参数为空校验
   3. 检验手机格式
   4. 通过图片验证码比那好获取，图片验证码
   5. 判断图片验证码是否过期
   6. 判断图片验证码是否正确
   7. 杉树redis中图片验证码
   8. 生成一个短信验证码，存入redis


### 5. 注册用户
 - 目的：创建一个用户对象，保存在数据库
 - 操作步骤：
   - 1. 获取参数
   - 2. 校验参数不能为空
   - 3. 手机号作为key，取出redis中的短信验证码
   - 4. 判断短信验证码是否过期
   - 5. 判断短信验证码是否正确
   - 6. 删除短信验证码
   - 7. 创建用户对象
   - 8. 设置用户对象属性
   - 9. 保存用户到数据库
   - 10. 返回响应

### 7. 注册用户加密

 - 目的： 使用falsk中提供的安全模块，将密码进行加密
 - 注意点：
   - @property装饰方法可以被属性使用
   - @属性.setter，给方法增加一个设置方式
   - generator_password_hash()系统提供的加密方法
   - check_password_hash()系统提供密码校验方法

### 8. 登陆接口
 - 目的： 完成登陆接口，提供给前端工程师
 - 操作流程
   1. 获取参数
   2. 检验参数
   3. 通过手机号到数据库查询用户对象
   4. 确认用户是否存在
   5. 校验密码是否正确
   6. 讲用户登录信息保存在session中
   7. 返回响应
### 9. 首页右上角用户显示
  - 目的：显示用户登录之后的信息
    1. 登陆用户，将信息存到redis中g
    2. 当我们刷新首页的时候到session中取user_id得知
    3. 然后将用户的自带呢数据，接口发送给你给前端
### 10. 退出用户
  - 目的，用户退出功能
    1. 清除session信息
    2. 返回响应
### 11. 用户最后登录时间
    
### 12.


































